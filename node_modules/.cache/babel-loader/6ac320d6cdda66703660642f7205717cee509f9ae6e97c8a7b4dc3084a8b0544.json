{"ast":null,"code":"var _jsxFileName = \"/Users/darshan/Documents/VTalk/vtalk_frontend/src/components/UserRegistration.js\",\n  _s = $RefreshSig$();\n// UserRegistration.js\nimport React, { useEffect, useState } from 'react';\nimport { over } from 'stompjs';\nimport SockJS from 'sockjs-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserRegistration = ({\n  onUserRegistered\n}) => {\n  _s();\n  var stompClient = null;\n  const [userData, setUserData] = useState({\n    username: '',\n    receivername: '',\n    connected: false,\n    message: ''\n  });\n  useEffect(() => {\n    if (userData.username) {\n      connect();\n    }\n  }, [userData]);\n  const connect = () => {\n    let Sock = new SockJS('http://localhost:8080/ws');\n    stompClient = over(Sock);\n    stompClient.connect({}, onConnected, onError);\n  };\n  const onError = err => {\n    console.log(err);\n  };\n  const onConnected = () => {\n    setUserData({\n      ...userData,\n      \"connected\": true\n    });\n    stompClient.subscribe('/topic/public', onMessageReceived);\n    userJoin();\n    window.location.href = `/room`;\n  };\n  const handleUsernameChange = event => {\n    setUsername(event.target.value);\n  };\n  const userJoin = () => {\n    var chatMessage = {\n      senderName: userData.username,\n      status: \"JOIN\"\n    };\n    stompClient.send(\"/app/message\", {}, JSON.stringify(chatMessage));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-registration\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Registration\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter your username\",\n      value: username,\n      onChange: handleUsernameChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: connect,\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(UserRegistration, \"Eahhx+PzJQ0IL7MIwmYXOjP/U64=\");\n_c = UserRegistration;\nexport default UserRegistration;\nvar _c;\n$RefreshReg$(_c, \"UserRegistration\");","map":{"version":3,"names":["React","useEffect","useState","over","SockJS","jsxDEV","_jsxDEV","UserRegistration","onUserRegistered","_s","stompClient","userData","setUserData","username","receivername","connected","message","connect","Sock","onConnected","onError","err","console","log","subscribe","onMessageReceived","userJoin","window","location","href","handleUsernameChange","event","setUsername","target","value","chatMessage","senderName","status","send","JSON","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/darshan/Documents/VTalk/vtalk_frontend/src/components/UserRegistration.js"],"sourcesContent":["// UserRegistration.js\nimport React, { useEffect, useState } from 'react';\nimport {over} from 'stompjs';\nimport SockJS from 'sockjs-client';\n\nconst UserRegistration = ({ onUserRegistered }) => {\n    var stompClient =null;\n    const [userData, setUserData] = useState({\n        username: '',\n        receivername: '',\n        connected: false,\n        message: ''\n      });\n    useEffect(() => {\n        if (userData.username) {\n            connect();\n        }\n    }, [userData]);\n\n    const connect =()=>{\n        let Sock = new SockJS('http://localhost:8080/ws');\n        stompClient = over(Sock);\n        stompClient.connect({},onConnected, onError);\n    }\n\n    const onError = (err) => {\n        console.log(err);\n        \n    }\n\n    const onConnected = () => {\n        setUserData({...userData,\"connected\": true});\n        stompClient.subscribe('/topic/public', onMessageReceived);\n        userJoin();\n        window.location.href = `/room`;\n    }\n\n    const handleUsernameChange = (event) => {\n        setUsername(event.target.value);\n    };\n\n    const userJoin = () => {\n        var chatMessage = {\n            senderName: userData.username,\n            status: \"JOIN\"\n        };\n        stompClient.send(\"/app/message\", {}, JSON.stringify(chatMessage));\n    }\n\n    return (\n        <div className=\"user-registration\">\n            <h2>User Registration</h2>\n            <input\n                type=\"text\"\n                placeholder=\"Enter your username\"\n                value={username}\n                onChange={handleUsernameChange}\n            />\n            <button type=\"button\" onClick={connect}>\n                Register\n            </button>\n        </div>\n    );\n};\n\nexport default UserRegistration;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAAQC,IAAI,QAAO,SAAS;AAC5B,OAAOC,MAAM,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,gBAAgB,GAAGA,CAAC;EAAEC;AAAiB,CAAC,KAAK;EAAAC,EAAA;EAC/C,IAAIC,WAAW,GAAE,IAAI;EACrB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC;IACrCW,QAAQ,EAAE,EAAE;IACZC,YAAY,EAAE,EAAE;IAChBC,SAAS,EAAE,KAAK;IAChBC,OAAO,EAAE;EACX,CAAC,CAAC;EACJf,SAAS,CAAC,MAAM;IACZ,IAAIU,QAAQ,CAACE,QAAQ,EAAE;MACnBI,OAAO,CAAC,CAAC;IACb;EACJ,CAAC,EAAE,CAACN,QAAQ,CAAC,CAAC;EAEd,MAAMM,OAAO,GAAEA,CAAA,KAAI;IACf,IAAIC,IAAI,GAAG,IAAId,MAAM,CAAC,0BAA0B,CAAC;IACjDM,WAAW,GAAGP,IAAI,CAACe,IAAI,CAAC;IACxBR,WAAW,CAACO,OAAO,CAAC,CAAC,CAAC,EAACE,WAAW,EAAEC,OAAO,CAAC;EAChD,CAAC;EAED,MAAMA,OAAO,GAAIC,GAAG,IAAK;IACrBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;EAEpB,CAAC;EAED,MAAMF,WAAW,GAAGA,CAAA,KAAM;IACtBP,WAAW,CAAC;MAAC,GAAGD,QAAQ;MAAC,WAAW,EAAE;IAAI,CAAC,CAAC;IAC5CD,WAAW,CAACc,SAAS,CAAC,eAAe,EAAEC,iBAAiB,CAAC;IACzDC,QAAQ,CAAC,CAAC;IACVC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAI,OAAM;EAClC,CAAC;EAED,MAAMC,oBAAoB,GAAIC,KAAK,IAAK;IACpCC,WAAW,CAACD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;EACnC,CAAC;EAED,MAAMR,QAAQ,GAAGA,CAAA,KAAM;IACnB,IAAIS,WAAW,GAAG;MACdC,UAAU,EAAEzB,QAAQ,CAACE,QAAQ;MAC7BwB,MAAM,EAAE;IACZ,CAAC;IACD3B,WAAW,CAAC4B,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,EAAEC,IAAI,CAACC,SAAS,CAACL,WAAW,CAAC,CAAC;EACrE,CAAC;EAED,oBACI7B,OAAA;IAAKmC,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAC9BpC,OAAA;MAAAoC,QAAA,EAAI;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC1BxC,OAAA;MACIyC,IAAI,EAAC,MAAM;MACXC,WAAW,EAAC,qBAAqB;MACjCd,KAAK,EAAErB,QAAS;MAChBoC,QAAQ,EAAEnB;IAAqB;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC,eACFxC,OAAA;MAAQyC,IAAI,EAAC,QAAQ;MAACG,OAAO,EAAEjC,OAAQ;MAAAyB,QAAA,EAAC;IAExC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEd,CAAC;AAACrC,EAAA,CA1DIF,gBAAgB;AAAA4C,EAAA,GAAhB5C,gBAAgB;AA4DtB,eAAeA,gBAAgB;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}